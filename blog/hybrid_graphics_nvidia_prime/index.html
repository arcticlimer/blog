<!DOCTYPE html>


<html lang="en-us" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Hybrid Graphics with NVIDIA PRIME - Vinícius Müller&rsquo;s Blog</title>

<meta name="description" content="Intro     I&rsquo;ve spent some time trying to setup hybrid graphics on NixOS and managed to get it up and running after adapting some of the content available at the NixOS Wiki. This post will go through the necessary changes that I had to do in order to get it working.
Author&rsquo;s Setup     The relevant setup for this post includes:
 OS: NixOS 21.">





<link rel="icon" type="image/x-icon" href="https://viniciusmuller.github.io/blog/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://viniciusmuller.github.io/blog/favicon.png">




    






    





    
    
        
    
    

    
        <link rel="stylesheet" href="https://viniciusmuller.github.io/blog/css/style.min.5aca35955b4a4a2b3987b33115c6840f82dd4fb76a33d9d54ec059a3c019dd8c.css" integrity="sha256-Wso1lVtKSis5h7MxFcaED4LdT7dqM9nVTsBZo8AZ3Yw=">
    





    

    





    
    
        
    
    

    
        <script src="https://viniciusmuller.github.io/blog/js/script.min.510c781c39dbb21b4c76d85c82e2bdf4689220adbb7cd61e49e9d293e442fb42.js" type="text/javascript" charset="utf-8" integrity="sha256-UQx4HDnbshtMdthcguK99GiSIK27fNYeSenSk&#43;RC&#43;0I="></script>
    







<meta property="og:title" content="Hybrid Graphics with NVIDIA PRIME" />
<meta property="og:description" content="Intro     I&rsquo;ve spent some time trying to setup hybrid graphics on NixOS and managed to get it up and running after adapting some of the content available at the NixOS Wiki. This post will go through the necessary changes that I had to do in order to get it working.
Author&rsquo;s Setup     The relevant setup for this post includes:
 OS: NixOS 21." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://viniciusmuller.github.io/blog/blog/hybrid_graphics_nvidia_prime/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-10-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-10-27T00:00:00+00:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hybrid Graphics with NVIDIA PRIME"/>
<meta name="twitter:description" content="Intro     I&rsquo;ve spent some time trying to setup hybrid graphics on NixOS and managed to get it up and running after adapting some of the content available at the NixOS Wiki. This post will go through the necessary changes that I had to do in order to get it working.
Author&rsquo;s Setup     The relevant setup for this post includes:
 OS: NixOS 21."/>













    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <div class="header-top">
    <h1 class="site-title">
    <a href="/blog">Vinícius Müller&#39;s Blog</a>
</h1>
    <ul class="social-icons">


    
        
        
        <li>
            <a href="https://github.com/viniciusmuller" title="Github" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

</span>

            </a>
        </li>
    

    
        
        
        <li>
            <a href="mailto:vinigm.nho@gmail.com" title="Email" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg>

</span>

            </a>
        </li>
    



    <li>
            <a href="https://viniciusmuller.github.io/blog/index.xml" title="RSS" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg>

</span>

            </a>
        </li>
    

</ul>
</div>

    <nav></nav>






            
        </header>
        <main id="main" tabindex="-1"> 
            
    

    <article class="post h-entry">
        <div class="post-header">
            <header>
                <h1 class="p-name post-title">Hybrid Graphics with NVIDIA PRIME</h1>

                
            </header>
        </div>
        




<nav id="TableOfContents">
  <ul>
    <li><a href="#authors-setup">Author&rsquo;s Setup</a></li>
    <li><a href="#nixos-configuration">NixOS Configuration</a>
      <ul>
        <li><a href="#offload-script">Offload Script</a></li>
        <li><a href="#examples">Examples</a></li>
      </ul>
    </li>
    <li><a href="#xserver-configuration">XServer Configuration</a></li>
    <li><a href="#nvidia--prime-configuration">NVIDIA + PRIME Configuration</a></li>
  </ul>
</nav>

        <div class="content e-content">
            <h1 id="intro" >Intro
<span>
    <a href="#intro">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h1><p>I&rsquo;ve spent some time trying to setup hybrid graphics on NixOS and managed to get
it up and running after adapting some of the content available at the NixOS Wiki.
This post will go through the necessary changes that I had to do in order to get
it working.</p>
<h2 id="authors-setup" >Author&rsquo;s Setup
<span>
    <a href="#authors-setup">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>The relevant setup for this post includes:</p>
<ul>
<li>OS: <code>NixOS 21.11 Porcupine</code></li>
<li>CPU: <code>Intel i7-7700</code></li>
<li>GPU: <code>NVIDIA GTX 1070</code></li>
<li>iGPU: <code>Intel HD Graphics 630</code></li>
</ul>
<blockquote>
<p>Note: I have not tested this in other machines, maybe some changes will be
necessary for this to run in other kinds of hardware.</p>
</blockquote>
<h2 id="nixos-configuration" >NixOS Configuration
<span>
    <a href="#nixos-configuration">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>Below is the necessary NixOS configuration to get it up and running. The
relevant parts will be covered next.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix"><span style="color:#66d9ef">let</span>
  nvidia-offload <span style="color:#f92672">=</span> pkgs<span style="color:#f92672">.</span>writeShellScriptBin <span style="color:#e6db74">&#34;nvidia-offload&#34;</span> <span style="color:#e6db74">&#39;&#39;
</span><span style="color:#e6db74">    export __NV_PRIME_RENDER_OFFLOAD=1
</span><span style="color:#e6db74">    export __NV_PRIME_RENDER_OFFLOAD_PROVIDER=NVIDIA-G0
</span><span style="color:#e6db74">    export __GLX_VENDOR_LIBRARY_NAME=nvidia
</span><span style="color:#e6db74">    export __VK_LAYER_NV_optimus=NVIDIA_only
</span><span style="color:#e6db74">    exec -a &#34;$1&#34; &#34;$@&#34;
</span><span style="color:#e6db74">  &#39;&#39;</span>;
<span style="color:#66d9ef">in</span>
{
  environment<span style="color:#f92672">.</span>systemPackages <span style="color:#f92672">=</span> [
    nvidia-offload
  ];

  services<span style="color:#f92672">.</span>xserver<span style="color:#f92672">.</span>config <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;
</span><span style="color:#e6db74">    # Integrated Intel GPU
</span><span style="color:#e6db74">    Section &#34;Device&#34;
</span><span style="color:#e6db74">      Identifier &#34;iGPU&#34;
</span><span style="color:#e6db74">      Driver &#34;modesetting&#34;
</span><span style="color:#e6db74">    EndSection
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    # Dedicated NVIDIA GPU
</span><span style="color:#e6db74">    Section &#34;Device&#34;
</span><span style="color:#e6db74">      Identifier &#34;dGPU&#34;
</span><span style="color:#e6db74">      Driver &#34;nvidia&#34;
</span><span style="color:#e6db74">    EndSection
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    Section &#34;ServerLayout&#34;
</span><span style="color:#e6db74">      Identifier &#34;layout&#34;
</span><span style="color:#e6db74">      Screen 0 &#34;iGPU&#34;
</span><span style="color:#e6db74">    EndSection
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    Section &#34;Screen&#34;
</span><span style="color:#e6db74">      Identifier &#34;iGPU&#34;
</span><span style="color:#e6db74">      Device &#34;iGPU&#34;
</span><span style="color:#e6db74">    EndSection
</span><span style="color:#e6db74">  &#39;&#39;</span>;

  services<span style="color:#f92672">.</span>xserver<span style="color:#f92672">.</span>videoDrivers <span style="color:#f92672">=</span> [ <span style="color:#e6db74">&#34;nvidia&#34;</span> ];
  hardware<span style="color:#f92672">.</span>nvidia<span style="color:#f92672">.</span>prime <span style="color:#f92672">=</span> {
    offload<span style="color:#f92672">.</span>enable <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
    intelBusId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PCI:0:2:0&#34;</span>;
    nvidiaBusId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PCI:1:0:0&#34;</span>;
  };
}
</code></pre></div><h3 id="offload-script" >Offload Script
<span>
    <a href="#offload-script">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix"><span style="color:#66d9ef">let</span>
  nvidia-offload <span style="color:#f92672">=</span> pkgs<span style="color:#f92672">.</span>writeShellScriptBin <span style="color:#e6db74">&#34;nvidia-offload&#34;</span> <span style="color:#e6db74">&#39;&#39;
</span><span style="color:#e6db74">    export __NV_PRIME_RENDER_OFFLOAD=1
</span><span style="color:#e6db74">    export __NV_PRIME_RENDER_OFFLOAD_PROVIDER=NVIDIA-G0
</span><span style="color:#e6db74">    export __GLX_VENDOR_LIBRARY_NAME=nvidia
</span><span style="color:#e6db74">    export __VK_LAYER_NV_optimus=NVIDIA_only
</span><span style="color:#e6db74">    exec -a &#34;$1&#34; &#34;$@&#34;
</span><span style="color:#e6db74">  &#39;&#39;</span>;
<span style="color:#66d9ef">in</span>
{
  environment<span style="color:#f92672">.</span>systemPackages <span style="color:#f92672">=</span> [
    nvidia-offload
  ];
}
</code></pre></div><p>This defines a small helper script that you will be using when you want to launch a program using the dedicated GPU.</p>
<h3 id="examples" >Examples
<span>
    <a href="#examples">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><ul>
<li>Launching glxgears using the integrated GPU: <code>glxgears</code></li>
<li>Launching glxgears using the dedicated GPU: <code>nvidia-offload glxgears</code></li>
</ul>
<blockquote>
<p>Extra: Launch Steam games using the GPU:</p>
<ul>
<li>Go at the game properties inside the Steam client</li>
<li>Find <code>Launch Options</code></li>
<li>If it&rsquo;s empty, change it to <code>nvidia-offload %command%</code></li>
</ul>
</blockquote>
<h2 id="xserver-configuration" >XServer Configuration
<span>
    <a href="#xserver-configuration">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix">services<span style="color:#f92672">.</span>xserver<span style="color:#f92672">.</span>config <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#e6db74">&#39;&#39;
</span><span style="color:#e6db74">  # Integrated Intel GPU
</span><span style="color:#e6db74">  Section &#34;Device&#34;
</span><span style="color:#e6db74">    Identifier &#34;iGPU&#34;
</span><span style="color:#e6db74">    Driver &#34;modesetting&#34;
</span><span style="color:#e6db74">  EndSection
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">  # Dedicated NVIDIA GPU
</span><span style="color:#e6db74">  Section &#34;Device&#34;
</span><span style="color:#e6db74">    Identifier &#34;dGPU&#34;
</span><span style="color:#e6db74">    Driver &#34;nvidia&#34;
</span><span style="color:#e6db74">  EndSection
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">  Section &#34;ServerLayout&#34;
</span><span style="color:#e6db74">    Identifier &#34;layout&#34;
</span><span style="color:#e6db74">    Screen 0 &#34;iGPU&#34;
</span><span style="color:#e6db74">  EndSection
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">  Section &#34;Screen&#34;
</span><span style="color:#e6db74">    Identifier &#34;iGPU&#34;
</span><span style="color:#e6db74">    Device &#34;iGPU&#34;
</span><span style="color:#e6db74">  EndSection
</span><span style="color:#e6db74">&#39;&#39;</span>;
</code></pre></div><p>This was necessary for me because the XServer was not recognizing
my graphics card, adding this extra piece of configuration solved it.</p>
<h2 id="nvidia--prime-configuration" >NVIDIA + PRIME Configuration
<span>
    <a href="#nvidia--prime-configuration">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix">services<span style="color:#f92672">.</span>xserver<span style="color:#f92672">.</span>videoDrivers <span style="color:#960050;background-color:#1e0010">=</span> [ <span style="color:#e6db74">&#34;nvidia&#34;</span> ];

hardware<span style="color:#f92672">.</span>nvidia<span style="color:#f92672">.</span>prime <span style="color:#960050;background-color:#1e0010">=</span> {
  offload<span style="color:#f92672">.</span>enable <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
  intelBusId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PCI:0:2:0&#34;</span>;
  nvidiaBusId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PCI:1:0:0&#34;</span>;
};
</code></pre></div><p>The first line here enables the <strong>proprietary NVIDIA drivers</strong> in our system, this
line is very important, otherwise it will not work.</p>
<p>Below is the NVIDIA PRIME configuration, in which we must enable <code>offload</code> and
the both the <code>nvidiaBusId</code> and <code>intelBusId</code> of our GPUs. You can find out how to
get the bus ids by reading this <a href="https://nixos.wiki/wiki/Nvidia#lspci">relevant part of the NixOS Wiki</a>.</p>
<blockquote>
<p>Note: In my system, I had to go to my BIOS settings and change the default
display output to <code>IGFX</code> (Integrated Graphics) instead of directly using the
PCIE slot, otherwise my system wouldn&rsquo;t detect the Intel HD device.</p>
</blockquote>
<h1 id="conclusion" >Conclusion
<span>
    <a href="#conclusion">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h1><p>After some tries I could get hybrid graphics working on NixOS in a quite easy
and reproducible way. This is a writeup meant to help other people with the same
issue and remember myself about it if I ever need to change it again.</p>
<h1 id="resources" >Resources
<span>
    <a href="#resources">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h1><ul>
<li><a href="https://nixos.wiki/wiki/Nvidia">NixOS Wiki&rsquo;s NVIDIA page</a></li>
<li><a href="https://download.nvidia.com/XFree86/Linux-x86_64/435.17/README/primerenderoffload.html">NVIDIA&rsquo;s PRIME Offloading</a></li>
</ul>

        </div>
        

    



<div class="post-info">
    
        <div class="post-date dt-published">
            <a class="u-url" href="/blog/blog/hybrid_graphics_nvidia_prime/"><time datetime="2021-10-27">2021-10-27</time></a>
            
        </div>
    

    <a class="post-hidden-url u-url" href="https://viniciusmuller.github.io/blog/blog/hybrid_graphics_nvidia_prime/">https://viniciusmuller.github.io/blog/blog/hybrid_graphics_nvidia_prime/</a>
    <a href="https://viniciusmuller.github.io/blog" class="p-name p-author post-hidden-author h-card" rel="me">Vinícius Müller</a>


    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    
                    <li><a href="https://viniciusmuller.github.io/blog/categories/nixos/">NixOS</a></li>
                
            </ul>
        
        
        
    </div>
</div>

    </article>

    
        
        
    

    
        
    
    
    <div class="pagination post-pagination">
        <div class="left pagination-item ">
            
                <a href="/blog/blog/gpu_passthrough/">KVM GPU Passthrough</a>
            
        </div>
        <div class="right pagination-item ">
            
                <a href="/blog/blog/kmonad_remappings/">Elegant Remappings With KMonad</a>
            
        </div>
    </div>




    

    
        








    

        </main>
        
            <footer class="common-footer">
    
    

    <div class="common-footer-bottom">
        
        <div class="copyright">
            <p>© Vinícius Müller, 2023<br>
            Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.<br>
            
            </p>  
        </div> 

        

    



   
    </div>

    <p class="h-card vcard">

    <a href=https://viniciusmuller.github.io/blog class="p-name u-url url fn" rel="me">Vinícius Müller</a> 

    

    
</p> 
</footer>

        
    </div>
</body>
</html>
