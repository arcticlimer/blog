<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Fable + React Interop Guide - Vinícius Müller&#x27;s Blog</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><div>Azure Adventures</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Azure Adventures/introduction.html">Introduction</a></li><li class="chapter-item "><a href="../Azure Adventures/unturned_server_saga.html">Unturned Server Saga</a></li></ol></li><li class="chapter-item expanded "><div>Development</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Development/documenting_everything.html">Documenting Stuff</a></li><li class="chapter-item "><a href="../Development/fixing_manually_deleted_docker_volume.html">Fixing manually deleted Docker volume</a></li><li class="chapter-item "><a href="../Development/handling_git_conflicts.html">Solving Merge Conflicts</a></li></ol></li><li class="chapter-item expanded "><div>FSharp</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../FSharp/fable_react_interop_guide.html" class="active">Fable + React Interop Guide</a></li></ol></li><li class="chapter-item expanded "><div>Gaming</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Gaming/games.html">Games that I like</a></li></ol></li><li class="chapter-item expanded "><div>Homelab</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Homelab/installing_armbian_tvbox.html">Installing Armbian into an old TV Box</a></li></ol></li><li class="chapter-item expanded "><div>Learning</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Learning/2022_reading_List.html">2022 Reading List</a></li><li class="chapter-item "><a href="../Learning/2023_readings.html">2023 Readings</a></li><li class="chapter-item "><div>Effective Learning with Anki</div></li><li class="chapter-item "><a href="../Learning/kindle_in_the_digital_age.html">Using a Kindle in the Digital Age</a></li></ol></li><li class="chapter-item expanded "><div>Nix</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Nix/flakes_cheat_sheet.html">Nix Flakes Cheat Sheet</a></li><li class="chapter-item "><a href="../Nix/nix_tensorflow_notebook_env.html">Reproducible Machine Learning Environment With Nix</a></li></ol></li><li class="chapter-item expanded "><div>NixOS</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../NixOS/gpu_passthrough.html">KVM GPU Passthrough</a></li><li class="chapter-item "><a href="../NixOS/hybrid_graphics_nvidia_prime.html">Hybrid Graphics with NVIDIA PRIME</a></li><li class="chapter-item "><a href="../NixOS/kmonad_remappings.html">Elegant Remappings With KMonad</a></li><li class="chapter-item "><a href="../NixOS/recovering_from_broken_boot.html">Recovering from broken bootloader</a></li><li class="chapter-item "><a href="../NixOS/setting_background_image.html">Setting XServer's Background Image</a></li><li class="chapter-item "><a href="../NixOS/zfs_mirror_on_nixos.html">Setting ZFS mirrors up in NixOS</a></li></ol></li><li class="chapter-item expanded "><div>Workflow</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Workflow/dactyl_manuform_experience.html">The Dactyl Manuform Experience</a></li><li class="chapter-item "><a href="../Workflow/newsboat_plus_mpv.html">Distraction-Free Setup Using Newsboat</a></li></ol></li><li class="chapter-item expanded "><a href="../index.html">Introduction</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Vinícius Müller&#x27;s Blog</h1>

                    <div class="right-buttons">
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p>F# has a pretty good interoperability with Javascript when using the Fable
library. When building user interfaces using React, there are multiple
alternatives, but the necessary resources to build solutions using Fable seem
scattered around the internet.</p>
<p>This document aims to provide a solid getting started to both Fable and Feliz,
and how to use both in order to interoperate F# with an existing React library.</p>
<h1 id="fable"><a class="header" href="#fable">Fable</a></h1>
<p><a href="https://fable.io/">Fable</a> is a library that allows one to write F# code while
using existing web solutions in the Javascript ecossystem. It also allows one to
export libraries that can be called from Javascript code.</p>
<p>As seen in &quot;<a href="https://fable.io/docs/communicate/js-from-fable.html">Call JS from
Fable</a>&quot;, there are
multiple ways of importing generic JS objects into our project, this document
will use <code>ImportAttribute</code> to import objects.</p>
<p>Note that by default, we don't have any types when importing and giving data to
JS objects, but we can easily add types on the F# side to have a type-safe
experience when developing with Fable, for example:</p>
<pre><code class="language-ts">// File.ts

interface MyInterface {
  name: string
  lastName: string
}

let myObject: MyInterface = {name: &quot;john&quot;, lastName: &quot;bar&quot;}

export const myObject;
</code></pre>
<pre><code class="language-fsharp">// my-file.fs

type Interface = {
  name: string
  lastName: string
}

[&lt;Import(&quot;default&quot;, from=&quot;./my-file.js&quot;)&gt;]
let myObject: Interface = jsNative

// Now we can use myObject directly from JS in a type-safe way
</code></pre>
<h1 id="feliz"><a class="header" href="#feliz">Feliz</a></h1>
<p><a href="https://zaid-ajaj.github.io/Feliz/">Feliz</a> is a library used to directly
interface React, adding the ability to create new type-safe components directly
by using F# or using already existing components defined in other languages.</p>
<p>We can define new React components in F# using the <code>ReactComponent</code> attribute,
for example: </p>
<pre><code class="language-fsharp">/// &lt;summary&gt;
/// A stateful React component that maintains a counter
/// &lt;/summary&gt;
[&lt;ReactComponent&gt;]
static member Counter() =
    let (count, setCount) = React.useState(0)
    Html.div [
        Html.h1 count
        Html.button [
            prop.onClick (fun _ -&gt; setCount(count + 1))
            prop.text &quot;Increment&quot;
        ]
    ]
</code></pre>
<p>In order to import existing components from other libraries, we also use
<code>&lt;ReactComponent&gt;</code>:</p>
<pre><code class="language-fsharp">[&lt;ReactComponent(import=&quot;default&quot;, from=&quot;react-markdown&quot;)&gt;]
static member Markdown(children: string, remarkPlugins: obj seq) = React.imported()
</code></pre>
<blockquote>
<p>Note that in this case, we pass import=&quot;default&quot; since it is a default export,
when dealing with named exports, import should receive the name of the
exported value.</p>
</blockquote>
<h1 id="asynchronous-f-code-in-feliz"><a class="header" href="#asynchronous-f-code-in-feliz">Asynchronous F# Code in Feliz</a></h1>
<p>Since callbacks can be asynchronous, we use React's <code>useEffect</code> to execute
our asynchronous F# code and set the data that we need using <code>useState</code>.</p>
<p>Below is an example of a Feliz component that fetches products from a remote API
asynchronously and then renders them on screen.</p>
<pre><code class="language-fsharp">[&lt;ReactComponent&gt;]
static member ApiCall() =
    let (products, setProducts) = React.useState([| |])

    let fetchProducts = async {
      let! products = fetch &quot;/api/products&quot;
      setProducts(products)
    } |&gt; Async.StartImmediate

    React.useEffect(fetchProducts, [| |])

    let productElements = List.map products (fun p -&gt; 
      Html.div [
        Html.h2 [
          prop.text p.name
        ]
        Html.p [
          prop.text p.description
        ]
      ]
    )

    Html.div productElements
</code></pre>
<div class="datetime" style="text-align: center; color: gray; font-style: italic; font-size: 90%;">17:30 Wednesday 25 January 2023</div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Development/handling_git_conflicts.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../Gaming/games.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Development/handling_git_conflicts.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../Gaming/games.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
